<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Our Music Festival Journey</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Comic Sans MS', 'Marker Felt', 'Chalkboard SE', 'Arial Rounded MT Bold', cursive, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 25%, #f093fb 50%, #4facfe 75%, #00f2fe 100%);
            background-size: 400% 400%;
            animation: gradientShift 15s ease infinite;
            overflow-x: hidden;
            min-height: 100vh;
        }

        @keyframes gradientShift {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        .hero {
            text-align: center;
            padding: 60px 20px;
            animation: fadeInDown 1s ease;
        }

        @keyframes fadeInDown {
            from {
                opacity: 0;
                transform: translateY(-30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .hero h1 {
            font-size: clamp(2.5rem, 8vw, 5rem);
            color: white;
            text-shadow: 4px 4px 8px rgba(0,0,0,0.3);
            margin-bottom: 20px;
            animation: bounce 2s ease infinite;
        }

        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        .hero p {
            font-size: clamp(1.2rem, 3vw, 1.8rem);
            color: white;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
            margin-bottom: 40px;
        }

        .emoji-float {
            font-size: 3rem;
            display: inline-block;
            animation: float 3s ease-in-out infinite;
            margin: 0 10px;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0px) rotate(0deg); }
            50% { transform: translateY(-20px) rotate(5deg); }
        }

        .activities-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
            gap: 30px;
            padding: 20px;
        }

        .activity-card {
            background: white;
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            transition: all 0.3s ease;
            cursor: pointer;
            position: relative;
            overflow: hidden;
        }

        .activity-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 8px;
            background: linear-gradient(90deg, #ff6b6b, #4ecdc4, #45b7d1, #f7b731, #5f27cd);
            background-size: 200% 100%;
            animation: rainbowSlide 3s linear infinite;
        }

        @keyframes rainbowSlide {
            0% { background-position: 0% 50%; }
            100% { background-position: 200% 50%; }
        }

        .activity-card:hover {
            transform: translateY(-10px) scale(1.02);
            box-shadow: 0 20px 40px rgba(0,0,0,0.3);
        }

        .activity-card.speaking {
            animation: speakPulse 0.5s ease infinite;
        }

        @keyframes speakPulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        .activity-icon {
            font-size: 4rem;
            margin-bottom: 15px;
            display: block;
            animation: pulse 2s ease infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }

        .activity-card:hover .activity-icon {
            animation: spin 1s ease;
        }

        @keyframes spin {
            0% { transform: rotate(0deg) scale(1); }
            50% { transform: rotate(180deg) scale(1.2); }
            100% { transform: rotate(360deg) scale(1); }
        }

        .activity-title {
            font-size: 1.8rem;
            color: #2d3436;
            margin-bottom: 15px;
            font-weight: bold;
        }

        .activity-description {
            font-size: 1.1rem;
            color: #636e72;
            line-height: 1.6;
            font-family: 'Arial', 'Helvetica', sans-serif;
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.8);
            z-index: 1000;
            justify-content: center;
            align-items: center;
            animation: fadeIn 0.3s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .modal-content {
            background: white;
            padding: 40px;
            border-radius: 25px;
            max-width: 600px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
            position: relative;
            animation: slideUp 0.4s ease;
        }

        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(50px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .close-btn {
            position: absolute;
            top: 15px;
            right: 20px;
            font-size: 2.5rem;
            cursor: pointer;
            color: #636e72;
            transition: all 0.3s ease;
            background: none;
            border: none;
        }

        .close-btn:hover {
            color: #ff6b6b;
            transform: rotate(90deg);
        }

        .fun-facts {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
            padding: 30px;
            border-radius: 20px;
            margin: 40px 0;
            text-align: center;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }

        .fun-facts h2 {
            font-size: 2.5rem;
            margin-bottom: 20px;
        }

        .fun-facts p {
            font-size: 1.3rem;
            line-height: 1.8;
        }

        .cta-button {
            display: inline-block;
            background: linear-gradient(45deg, #ff6b6b, #4ecdc4);
            color: white;
            padding: 20px 40px;
            border-radius: 50px;
            font-size: 1.5rem;
            font-weight: bold;
            text-decoration: none;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            transition: all 0.3s ease;
            border: none;
            cursor: pointer;
            margin: 20px 10px;
        }

        .cta-button:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.3);
        }

        .music-notes {
            position: fixed;
            font-size: 2rem;
            color: rgba(255,255,255,0.6);
            pointer-events: none;
            z-index: 999;
            animation: floatAway 4s ease-in forwards;
        }

        @keyframes floatAway {
            0% {
                opacity: 1;
                transform: translateY(0) rotate(0deg);
            }
            100% {
                opacity: 0;
                transform: translateY(-200px) rotate(360deg);
            }
        }

        .voice-indicator {
            display: inline-block;
            width: 12px;
            height: 12px;
            background: #4ecdc4;
            border-radius: 50%;
            margin-left: 10px;
            animation: blink 1s ease infinite;
        }

        @keyframes blink {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.3; }
        }

        .loading-message {
            text-align: center;
            color: #636e72;
            font-size: 0.9rem;
            margin-top: 10px;
            font-style: italic;
        }

        @media (max-width: 768px) {
            .activities-grid {
                grid-template-columns: 1fr;
            }
            
            .hero h1 {
                font-size: 2.5rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="hero">
            <h1>üéµ Our Amazing Music Festival! üéµ</h1>
            <p>
                <span class="emoji-float">üåü</span>
                <span class="emoji-float">ü•Å</span>
                <span class="emoji-float">üíÉ</span>
                <span class="emoji-float">üé∏</span>
                <span class="emoji-float">üéπ</span>
            </p>
            <p>Click on each activity to learn more and hear about it!</p>
        </div>

        <div class="activities-grid">
            <div class="activity-card" onclick="showModal(0)" data-index="0">
                <span class="activity-icon">üï∫üíÉ</span>
                <h2 class="activity-title">Yalla! Arabic Dance</h2>
                <p class="activity-description">Learn the Dabke and explore Arab culture through dance, music, and stories!</p>
            </div>

            <div class="activity-card" onclick="showModal(1)" data-index="1">
                <span class="activity-icon">ü™Éüé®</span>
                <h2 class="activity-title">Aboriginal Infusion</h2>
                <p class="activity-description">Experience Australia's First Peoples' traditions with didgeridoo, dance, and storytelling!</p>
            </div>

            <div class="activity-card" onclick="showModal(2)" data-index="2">
                <span class="activity-icon">ü•Åüåç</span>
                <h2 class="activity-title">African Drumming</h2>
                <p class="activity-description">Play djembe, balafon, and more with rhythms from Ghana, Guinea, and Senegal!</p>
            </div>

            <div class="activity-card" onclick="showModal(3)" data-index="3">
                <span class="activity-icon">ü™óüèîÔ∏è</span>
                <h2 class="activity-title">Slovenian Oom-pah-pah</h2>
                <p class="activity-description">Clap and sing along to traditional accordion music from Slovenia's mountains!</p>
            </div>

            <div class="activity-card" onclick="showModal(4)" data-index="4">
                <span class="activity-icon">üé§‚ú®</span>
                <h2 class="activity-title">Beatboxing Workshop</h2>
                <p class="activity-description">Turn your mouth into a beat machine with Josh Allen-Craig!</p>
            </div>

            <div class="activity-card" onclick="showModal(5)" data-index="5">
                <span class="activity-icon">üîäüéß</span>
                <h2 class="activity-title">SUSSUGALA</h2>
                <p class="activity-description">Feel the bass! A futuristic journey into underground techno club vibes!</p>
            </div>

            <div class="activity-card" onclick="showModal(6)" data-index="6">
                <span class="activity-icon">üé∏üé∫</span>
                <h2 class="activity-title">Jamo Combo</h2>
                <p class="activity-description">Groove to Jazz, Latin, Funk, Pop, and Reggae with this vibey three-piece band!</p>
            </div>

            <div class="activity-card" onclick="showModal(7)" data-index="7">
                <span class="activity-icon">üé≠üéâ</span>
                <h2 class="activity-title">Diaspora Artists</h2>
                <p class="activity-description">Interactive characters dancing, playing, and sharing joy throughout the festival!</p>
            </div>

            <div class="activity-card" onclick="showModal(8)" data-index="8">
                <span class="activity-icon">üéπüòå</span>
                <h2 class="activity-title">Peaceful Piano</h2>
                <p class="activity-description">Relax and chill out with John Keuneman's gentle piano melodies!</p>
            </div>

            <div class="activity-card" onclick="showModal(9)" data-index="9">
                <span class="activity-icon">üé∏‚òÄÔ∏è</span>
                <h2 class="activity-title">Cozy Acoustic Set</h2>
                <p class="activity-description">Feel-good acoustic covers perfect for a sunny outdoor vibe!</p>
            </div>

            <div class="activity-card" onclick="showModal(10)" data-index="10">
                <span class="activity-icon">üé§üéµ</span>
                <h2 class="activity-title">Karaoke Covers</h2>
                <p class="activity-description">Sing along with MJ and Rubab if you've still got energy left!</p>
            </div>
        </div>

        <div class="fun-facts">
            <h2>üåü Did You Know? üåü</h2>
            <p>Today you'll experience music and dance from 6 different continents! From the deserts of Arabia to the mountains of Slovenia, from African villages to Australian outback, and from underground techno clubs to peaceful piano rooms. What an adventure!</p>
        </div>

        <div style="text-align: center; padding: 40px 0;">
            <button class="cta-button" onclick="createMusicNotes(event)">üéµ Get Excited! üéµ</button>
        </div>
    </div>

    <div id="modal" class="modal" onclick="closeModal(event)">
        <div class="modal-content" onclick="event.stopPropagation()">
            <button class="close-btn" onclick="closeModal()">&times;</button>
            <span id="modal-icon" class="activity-icon"></span>
            <h2 id="modal-title" class="activity-title"></h2>
            <p id="modal-description" class="activity-description"></p>
            <div id="loading-message" class="loading-message" style="display: none;">
                <span class="voice-indicator"></span> Generating voice...
            </div>
        </div>
    </div>

    <script>
        const ELEVENLABS_API_KEY = 'sk_56642568748bda55e700865330d74da9097df6cc3d6994eb';
        const VOICE_ID = 'pNInz6obpgDQGcFmaJgB'; // Default voice (Adam)
        
        let currentAudio = null;
        let audioCache = {};

        const activities = [
            {
                icon: 'üï∫üíÉ',
                title: 'Yalla! Arabic Dance and Culture',
                description: 'Embark on a lively and engaging journey into the diverse and rich traditions of the Arab world! This highly interactive program offers an opportunity to explore Arab cultures and histories through dance, music, and storytelling. The best part? You\'ll get to learn the Dabke - a traditional line dance that brings people together in celebration!'
            },
            {
                icon: 'ü™Éüé®',
                title: 'Aboriginal Infusion',
                description: 'Aboriginal Infusion is a highly interactive and engaging introduction to the rich, continuing traditions and cultural aspects of Australia\'s First Peoples. Experience the magic of traditional dance, learn about the didgeridoo, explore ancient artefacts, and be captivated by storytelling that has been passed down for thousands of years!'
            },
            {
                icon: 'ü•Åüåç',
                title: 'African Drumming Workshop',
                description: 'Explore rhythms and songs from Ghana, Guinea, and Senegal! You\'ll be introduced to a range of instruments including the djembe, dun dun drums, shekere, talking drum, balafon and more! Get ready to play the drums and other percussion instruments as you discover the heartbeat of African music.'
            },
            {
                icon: 'ü™óüèîÔ∏è',
                title: 'Slovenian Oom-pah-pah',
                description: 'From the mountains, forests, and green valleys of Slovenia comes music to make your heart smile and your hands clap! Christian\'s Dad, Lenti, will play traditional Oom-pah-pah songs on the button and piano accordions, and P2\'s Christine will join him singing and dancing in traditional Slovenian costume. Come and join the fun!'
            },
            {
                icon: 'üé§‚ú®',
                title: 'Beatboxing Workshop',
                description: 'Josh Allen-Craig returns for another beatboxing workshop where you can experiment with all sorts of weird and wonderful ways to turn the sounds we make into beats and music. Your mouth is about to become a one-person band!'
            },
            {
                icon: 'üîäüéß',
                title: 'SUSSUGALA',
                description: 'An imaginative voyage into futuristic sound and digital imagery! Quiet and chill? NO. Beats you can feel and groove to? YES. Born out of the dance music scene, this experience is built on rhythm and room-filling bass. Forget you\'re at school for 45 minutes and be transported into the world of the underground techno club with Andrew Bacaller!'
            },
            {
                icon: 'üé∏üé∫',
                title: 'Jamo Combo',
                description: 'Three piece vibey, groovy band featuring Drums, Guitar & Vocals, and Bass! Experience a wonderful mix of music styles including Jazz, Latin, Funk, Pop, and Reggae. Get ready to groove!'
            },
            {
                icon: 'üé≠üéâ',
                title: 'Diaspora Artistic Collective',
                description: 'Characters move freely throughout the event, greeting, dancing, playing, and sharing joyful moments with students and attendees. Keep your eyes open - you might encounter a surprise performer anywhere!'
            },
            {
                icon: 'üéπüòå',
                title: 'Peaceful Piano',
                description: 'Unwind with John Keuneman\'s gentle piano melodies ‚Äì a calm, reflective soundtrack to relax and chill out after a big day. Sometimes the most beautiful moments are the quiet ones.'
            },
            {
                icon: 'üé∏‚òÄÔ∏è',
                title: 'Cozy Acoustic Set',
                description: 'Ease into the afternoon with Fynn Wilton and co.\'s laid-back acoustic tunes ‚Äì bright, feel-good covers perfect for a sunny outdoor vibe. The perfect soundtrack for unwinding with friends!'
            },
            {
                icon: 'üé§üéµ',
                title: 'Karaoke Covers',
                description: 'Hang out with MJ and Rubab who will be running an all-ages sing-along session if you\'ve still got the energy for music making by the end of the day! (Playlist created before session, not taking requests!) Time to let your voice shine!'
            }
        ];

        async function generateSpeech(text, index) {
            // Check if we have cached audio
            if (audioCache[index]) {
                return audioCache[index];
            }

            const loadingMsg = document.getElementById('loading-message');
            loadingMsg.style.display = 'block';

            try {
                const response = await fetch(`https://api.elevenlabs.io/v1/text-to-speech/${VOICE_ID}`, {
                    method: 'POST',
                    headers: {
                        'Accept': 'audio/mpeg',
                        'Content-Type': 'application/json',
                        'xi-api-key': ELEVENLABS_API_KEY
                    },
                    body: JSON.stringify({
                        text: text,
                        model_id: 'eleven_monolingual_v1',
                        voice_settings: {
                            stability: 0.5,
                            similarity_boost: 0.75
                        }
                    })
                });

                if (!response.ok) {
                    throw new Error('Failed to generate speech');
                }

                const audioBlob = await response.blob();
                const audioUrl = URL.createObjectURL(audioBlob);
                
                // Cache the audio URL
                audioCache[index] = audioUrl;
                
                loadingMsg.style.display = 'none';
                return audioUrl;
            } catch (error) {
                console.error('Error generating speech:', error);
                loadingMsg.style.display = 'none';
                return null;
            }
        }

        async function playActivityVoice(index) {
            const activity = activities[index];
            const text = `${activity.title}. ${activity.description}`;
            
            // Stop current audio if playing
            if (currentAudio) {
                currentAudio.pause();
                currentAudio = null;
                document.querySelectorAll('.activity-card').forEach(card => {
                    card.classList.remove('speaking');
                });
            }

            const audioUrl = await generateSpeech(text, index);
            
            if (audioUrl) {
                currentAudio = new Audio(audioUrl);
                const card = document.querySelector(`[data-index="${index}"]`);
                
                currentAudio.onplay = () => {
                    card.classList.add('speaking');
                };
                
                currentAudio.onended = () => {
                    card.classList.remove('speaking');
                    currentAudio = null;
                };
                
                currentAudio.onerror = () => {
                    card.classList.remove('speaking');
                    currentAudio = null;
                };
                
                currentAudio.play();
            }
        }

        function showModal(index) {
            const activity = activities[index];
            document.getElementById('modal-icon').textContent = activity.icon;
            document.getElementById('modal-title').textContent = activity.title;
            document.getElementById('modal-description').textContent = activity.description;
            document.getElementById('modal').style.display = 'flex';
            createMusicNotes({clientX: window.innerWidth / 2, clientY: window.innerHeight / 2});
            
            // Play voice for this activity
            playActivityVoice(index);
        }

        function closeModal(event) {
            if (!event || event.target.id === 'modal') {
                document.getElementById('modal').style.display = 'none';
                // Stop audio when closing modal
                if (currentAudio) {
                    currentAudio.pause();
                    currentAudio = null;
                    document.querySelectorAll('.activity-card').forEach(card => {
                        card.classList.remove('speaking');
                    });
                }
            }
        }

        function createMusicNotes(event) {
            const notes = ['‚ô™', '‚ô´', '‚ô¨', '‚ô©', 'üéµ', 'üé∂'];
            const colors = ['#ff6b6b', '#4ecdc4', '#45b7d1', '#f7b731', '#5f27cd', '#ff9ff3'];
            
            for (let i = 0; i < 8; i++) {
                setTimeout(() => {
                    const note = document.createElement('div');
                    note.className = 'music-notes';
                    note.textContent = notes[Math.floor(Math.random() * notes.length)];
                    note.style.color = colors[Math.floor(Math.random() * colors.length)];
                    note.style.left = (event.clientX - 20 + Math.random() * 40) + 'px';
                    note.style.top = (event.clientY - 20 + Math.random() * 40) + 'px';
                    note.style.fontSize = (1.5 + Math.random() * 1.5) + 'rem';
                    document.body.appendChild(note);
                    
                    setTimeout(() => note.remove(), 4000);
                }, i * 100);
            }
        }

        // Add some random floating notes on load
        window.addEventListener('load', () => {
            setInterval(() => {
                if (Math.random() > 0.7) {
                    createMusicNotes({
                        clientX: Math.random() * window.innerWidth,
                        clientY: window.innerHeight
                    });
                }
            }, 2000);
        });
    </script>
</body>
</html>